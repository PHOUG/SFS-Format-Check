## Основная информация:

### Описание проекта:
- Этот проект представляет собой курсовую работу по предмету **Операционные сисетемы и системное программирование**. 

- **Тема курсовой** — "Утилита форматирования и проверки файловой системы SFS"


### Примерная структура проета:
``` bash
SFS-Format-Check/
├── include/          # Заголовочные файлы
│   ├── break.h
│   ├── check.h
│   ├── colors.h
│   ├── define.h
│   ├── dump.h
│   ├── error.h
│   ├── fill.h
│   ├── format.h
│   └── structures.h
├── src/              # Исходники
│   ├── break.c
│   ├── check.c
│   ├── dump.c
│   ├── fill.c
│   ├── format.c
│   └── main.c
├── .gitignore
├── Makefile
└── README.md
```

## Описание файлов:

### ```break.c``` - порча диска для проверки ```check.c```:
Этот файл реализует интерактивную утилиту, предназначенную для преднамеренного повреждения ключевых структур файловой системы SFS с целью проверки механизмов обнаружения и восстановления ошибок.


### ```check.c``` - проверка целостности диска:
1. Открывает ```disk.img```

2. Читает суперблок и проверяет поля (```magic```, ```размер блока```, ```число блоков```)

3. Проверяет, что в bitmap заняты блоки ```0..(DATA_BLOCK_START - 1)```

4. Сканирует inode-таблицу на предмет некорректных блоков и повреждённых записей


### ```dump.c``` - утилита просмотра содержимого SFS-диска:
1. Запрашивает имя файла-диска у пользователя.

2. Открывает диск в режиме только для чтения.

3. Считывает и выводит содержимое ```SuperBlock```.

4. Отображает ```bitmap``` блоков (занятые/свободные).

5. Выводит информацию обо всех занятых inodes.


### ```fill.c``` - форматирование SFS:
1. Запрашивает имя файла-диска у пользователя.

2. Считывает ```bitmap``` занятых блоков.

3. Заполняет все свободные ```inodes``` и блоки фиктивными файлами ```fillN```.

4. Каждый файл занимает 1 блок, заполненный байтами ```0xAA```.

5. Обновляет ```bitmap``` и ```inode```-таблицу на диске.

6. Выводит количество созданных файлов.

### ```format.c``` - форматирование SFS:
1. Создаёт файл ```disk.img``` размером 1 МБ

2. Записывает суперблок

3. Инициализирует битовую карту (```bitmap```)

4. Создаёт таблицу ```inodes```

5. Оставляет место под блоки данных


### ```main.c``` - основной файл:
Обрабатывает аргументы командной строки:

- ```format``` → форматирует виртуальный диск (```format_disk()```).

- ```check``` → проверяет целостность файловой системы (```check_main()```).

- ```dump``` → выводит содержимое диска (```dump_file()```).

- ```fill``` → заполняет диск фиктивными файлами (```fill_file()```).

- ```break``` → намеренно повреждает диск для тестирования (```break_disk()```).

- ```help``` → выводит справку по командам.

При отсутствии аргумента или неизвестной команде — выводит сообщение об ошибке и справку.

Подключает модули: ```colors.h```, ```format.h```, ```check.h```, ```dump.h```, ```fill.h```, ```break.h```.

Функция ```print_help()``` описывает команды и формат использования.

## Cборка и использование

### Сборка:

``` bash
make              # собрать все утилиты
make clean        # удалить build/ и exec/ 
```

### Использование:
``` py
./exec/sfs break  # Порча диска
./exec/sfs check  # Проверка
./exec/sfs dump   # Прочитать диск
./exec/sfs format # Создание диска
./exec/sfs fill   # Заполнить диск
./exec/sfs help   # Вывод инструкций
```